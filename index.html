<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RialoSwap â€” Swap & Stake on Solana</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800;900&family=DM+Mono:wght@400;500;600&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
<script src="https://plugin.jup.ag/plugin-v1.js" data-preload defer></script>

<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RIALO OFFICIAL BRAND â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   #a9ddd3  Rialo Mint
   #e8e3d5  Rialo Cream
   #010101  Pure Black
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --mint:      #a9ddd3;
  --mint-dim:  rgba(169,221,211,0.55);
  --mint-glow: rgba(169,221,211,0.15);
  --mint-deep: #6ab8ac;
  --cream:     #e8e3d5;
  --cream-dim: rgba(232,227,213,0.5);
  --cream-faint:rgba(232,227,213,0.15);
  --black:     #010101;

  /* Surfaces */
  --bg:    #04080a;
  --bg2:   #07100d;
  --card:  #0a1612;
  --card2: #0d1c18;
  --card3: #111f19;
  --border:rgba(169,221,211,0.12);
  --border2:rgba(169,221,211,0.06);

  /* Status */
  --green: #6fcf97;
  --red:   #e05c6e;
  --gold:  #f0c040;
  --gold2: #d4a843;
  --purple:#c084fc;
  --blue:  #60a5fa;

  /* Rank Colors */
  --rank-rookie:  #94a3b8;
  --rank-staker:  var(--mint);
  --rank-warrior: #60a5fa;
  --rank-diamond: #c084fc;
  --rank-legend:  var(--gold);

  --font:   'Syne', sans-serif;
  --mono:   'DM Mono', monospace;
  --orb:    'Orbitron', monospace;
  --r:      10px;
}

html{scroll-behavior:smooth}
body{
  background:var(--bg);
  color:var(--cream);
  font-family:var(--font);
  min-height:100vh;
  overflow-x:hidden;
}

/* Grid overlay */
body::before{
  content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:
    linear-gradient(rgba(169,221,211,0.028) 1px,transparent 1px),
    linear-gradient(90deg,rgba(169,221,211,0.028) 1px,transparent 1px);
  background-size:52px 52px;
}
/* Ambient top glow */
.ambient{
  position:fixed;top:-20%;left:50%;transform:translateX(-50%);
  width:900px;height:500px;z-index:0;pointer-events:none;
  background:radial-gradient(ellipse,rgba(169,221,211,0.06) 0%,transparent 65%);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SCROLLBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:rgba(169,221,211,0.2);border-radius:3px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAV â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
nav{
  position:sticky;top:0;z-index:500;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 24px;height:60px;
  background:rgba(4,8,10,0.96);
  backdrop-filter:blur(28px);
  border-bottom:1px solid var(--border);
}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none}
.logo img{height:34px;width:auto;object-fit:contain}
.logo-text{font-family:var(--orb);font-size:0.95rem;font-weight:700;
  letter-spacing:2px;color:var(--cream);
  background:linear-gradient(135deg,var(--cream) 40%,var(--mint));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}

.nav-center{display:flex;gap:2px;background:rgba(169,221,211,0.04);
  border:1px solid var(--border);border-radius:9px;padding:3px}
.nav-btn{
  padding:7px 20px;border-radius:7px;border:none;background:transparent;
  color:var(--cream-dim);font-family:var(--font);font-size:0.7rem;
  font-weight:700;letter-spacing:1.5px;text-transform:uppercase;
  cursor:pointer;transition:.2s;
}
.nav-btn:hover{color:var(--cream)}
.nav-btn.on{
  background:linear-gradient(135deg,rgba(169,221,211,0.16),rgba(169,221,211,0.06));
  border:1px solid rgba(169,221,211,0.22);color:var(--mint);
}

.nav-right{display:flex;align-items:center;gap:8px}
.net-pill{
  display:flex;align-items:center;gap:5px;padding:5px 12px;
  border-radius:20px;background:rgba(169,221,211,0.06);
  border:1px solid rgba(169,221,211,0.15);
  font-size:0.6rem;font-weight:700;letter-spacing:2px;
  color:var(--mint);font-family:var(--mono);
}
.dot{width:5px;height:5px;border-radius:50%;background:var(--mint);
  box-shadow:0 0 6px var(--mint);animation:dotpulse 2s infinite}
@keyframes dotpulse{0%,100%{opacity:1}50%{opacity:.15}}

.wallet-btn{
  padding:8px 18px;border-radius:8px;border:none;cursor:pointer;
  background:linear-gradient(135deg,var(--mint),var(--mint-deep));
  color:var(--black);font-family:var(--font);font-size:0.7rem;
  font-weight:800;letter-spacing:1px;text-transform:uppercase;transition:.2s;
}
.wallet-btn:hover{box-shadow:0 0 22px rgba(169,221,211,0.4);transform:translateY(-1px)}
.wallet-btn.on{background:rgba(169,221,211,0.08);border:1px solid rgba(169,221,211,0.25);color:var(--mint)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PAGES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page{display:none;position:relative;z-index:1;animation:fadeIn .3s ease}
.page.on{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SWAP PAGE â€” 3 COLUMN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.swap-grid{
  max-width:1420px;margin:0 auto;padding:14px 16px;
  display:grid;grid-template-columns:190px 1fr 390px;gap:12px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CARDS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.chead{
  padding:10px 14px;border-bottom:1px solid var(--border2);
  font-size:0.58rem;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;
  color:var(--cream-dim);display:flex;align-items:center;gap:7px;
}
.chead::before{content:'';width:2px;height:9px;background:var(--mint);border-radius:2px;flex-shrink:0}

/* â”€â”€ LEFT PAIRS â”€â”€ */
.col-left{grid-row:1/4}
.pair-item{
  display:flex;align-items:center;gap:8px;padding:9px 12px;
  cursor:pointer;border-bottom:1px solid var(--border2);transition:.14s;
}
.pair-item:hover{background:rgba(169,221,211,0.04)}
.pair-item.on{background:rgba(169,221,211,0.07);border-left:2px solid var(--mint)}
.pair-item img{width:24px;height:24px;border-radius:50%;background:var(--card3);object-fit:cover}
.pii .sym{font-size:0.68rem;font-weight:700;color:var(--cream)}
.pii .price{font-size:0.62rem;font-family:var(--mono);margin-top:1px}
.pii .chg{font-size:0.55rem;font-family:var(--mono)}
.up{color:var(--green)}.dn{color:var(--red)}

/* â”€â”€ CENTER â”€â”€ */
.col-center{display:flex;flex-direction:column;gap:12px}

.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
.stat-c{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:13px 15px}
.sl{font-size:0.57rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--cream-dim);margin-bottom:5px}
.sv{font-size:1rem;font-weight:800;font-family:var(--mono);color:var(--cream)}
.ss{font-size:0.58rem;font-family:var(--mono);color:var(--cream-dim);margin-top:2px}

/* Chart */
.chart-card{display:flex;flex-direction:column}
.chart-top{
  display:flex;align-items:center;gap:10px;padding:11px 16px;
  border-bottom:1px solid var(--border2);flex-wrap:wrap;
}
.pair-icons{position:relative;width:46px;height:26px;flex-shrink:0}
.pair-icons img{width:26px;height:26px;border-radius:50%;position:absolute;
  object-fit:cover;border:2px solid var(--bg)}
.pair-icons img:first-child{left:0;z-index:2}
.pair-icons img:last-child{left:16px;z-index:1}
.pair-label{font-size:0.88rem;font-weight:800;color:var(--cream)}
.live-p{font-size:1.35rem;font-weight:800;font-family:var(--mono);color:var(--mint)}
.live-c{font-size:0.65rem;font-family:var(--mono);margin-left:5px}
.tf-row{display:flex;gap:3px;margin-left:auto}
.tf{padding:4px 8px;border-radius:5px;background:transparent;
  border:1px solid var(--border);color:var(--cream-dim);
  font-family:var(--font);font-size:0.6rem;font-weight:700;cursor:pointer;transition:.13s}
.tf:hover,.tf.on{background:rgba(169,221,211,0.1);border-color:rgba(169,221,211,0.28);color:var(--mint)}
#chartDiv{height:278px;width:100%}
.chart-inds{display:flex;gap:18px;padding:8px 16px;border-top:1px solid var(--border2);flex-wrap:wrap}
.ind{font-size:0.62rem;font-family:var(--mono)}
.il{color:var(--cream-dim)}.iv{font-weight:600;margin-left:4px}

/* Trades */
.tcols{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;
  padding:6px 14px;font-size:0.55rem;font-weight:700;letter-spacing:1.5px;
  text-transform:uppercase;color:var(--cream-dim);border-bottom:1px solid var(--border2)}
.trow{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;
  padding:5px 14px;font-size:0.65rem;font-family:var(--mono);
  border-bottom:1px solid rgba(169,221,211,0.03);animation:slid .28s ease}
@keyframes slid{from{opacity:0;transform:translateX(-4px)}to{opacity:1;transform:none}}

/* â”€â”€ RIGHT COLUMN â”€â”€ */
.col-right{display:flex;flex-direction:column;gap:10px}
.rtabs{display:flex;gap:0;background:var(--card);border:1px solid var(--border);
  border-radius:var(--r);overflow:hidden}
.rtab{flex:1;padding:12px;text-align:center;font-size:0.65rem;font-weight:800;
  letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:.18s;
  color:var(--cream-dim);border:none;background:transparent;font-family:var(--font);
  border-bottom:2px solid transparent}
.rtab:hover{color:var(--cream);background:rgba(169,221,211,0.03)}
.rtab.on{color:var(--mint);border-bottom-color:var(--mint);background:rgba(169,221,211,0.06)}

/* Jupiter */
.jup-wrap{background:var(--card);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.jup-label{padding:9px 14px;font-size:0.58rem;font-weight:700;letter-spacing:2px;
  text-transform:uppercase;color:var(--cream-dim);display:flex;align-items:center;gap:6px;
  border-bottom:1px solid var(--border2)}
.jup-label::before{content:'';width:2px;height:9px;background:var(--mint);border-radius:2px}
#jup-container{min-height:490px;width:100%}

/* Net stats */
.net-stats{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:13px}
.ns-t{font-size:0.57rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;
  color:var(--cream-dim);margin-bottom:9px;display:flex;align-items:center;gap:6px}
.ns-t::before{content:'';width:2px;height:8px;background:var(--mint);border-radius:2px}
.ns-row{display:flex;justify-content:space-between;align-items:center;
  padding:5px 0;border-bottom:1px solid var(--border2);font-size:0.64rem;font-family:var(--mono)}
.ns-row:last-child{border-bottom:none}
.ns-row span:first-child{color:var(--cream-dim)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STAKING GAMIFIED PAGE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stake-page{max-width:1420px;margin:0 auto;padding:14px 16px}

/* â”€â”€ SEASON BANNER â”€â”€ */
.season-banner{
  position:relative;overflow:hidden;
  background:linear-gradient(135deg,rgba(169,221,211,0.08) 0%,rgba(240,192,64,0.06) 50%,rgba(169,221,211,0.04) 100%);
  border:1px solid rgba(169,221,211,0.2);border-radius:14px;
  padding:20px 28px;margin-bottom:14px;
  display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px;
}
.season-banner::before{
  content:'';position:absolute;top:-50%;right:-5%;width:40%;height:200%;
  background:radial-gradient(ellipse,rgba(240,192,64,0.06) 0%,transparent 65%);
  pointer-events:none;
}
.sb-left .title{font-family:var(--orb);font-size:1.1rem;font-weight:900;
  letter-spacing:2px;color:var(--cream);margin-bottom:4px}
.sb-left .subtitle{font-size:0.7rem;color:var(--cream-dim);font-family:var(--mono)}
.sb-left .subtitle b{color:var(--mint)}
.sb-center{text-align:center}
.sb-center .timer-label{font-size:0.58rem;font-weight:700;letter-spacing:2px;
  text-transform:uppercase;color:var(--cream-dim);margin-bottom:6px}
.timer-boxes{display:flex;gap:6px;align-items:center}
.tbox{background:rgba(0,0,0,0.4);border:1px solid rgba(169,221,211,0.15);
  border-radius:7px;padding:8px 12px;text-align:center;min-width:52px}
.tbox .num{font-family:var(--orb);font-size:1.2rem;font-weight:700;color:var(--mint);line-height:1}
.tbox .lbl{font-size:0.5rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--cream-dim);margin-top:2px}
.tsep{font-family:var(--orb);font-size:1.2rem;color:var(--mint-dim)}
.sb-right{text-align:right}
.prize-label{font-size:0.58rem;font-weight:700;letter-spacing:2px;
  text-transform:uppercase;color:var(--cream-dim);margin-bottom:4px}
.prize-val{font-family:var(--orb);font-size:1.6rem;font-weight:900;
  background:linear-gradient(135deg,var(--gold),var(--cream));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.prize-sub{font-size:0.6rem;font-family:var(--mono);color:var(--cream-dim);margin-top:2px}

/* â”€â”€ MAIN STAKE GRID â”€â”€ */
.stake-grid{
  display:grid;
  grid-template-columns:300px 1fr 310px;
  gap:14px;
}

/* â”€â”€ PLAYER CARD (LEFT) â”€â”€ */
.player-card{
  background:var(--card);border:1px solid var(--border);border-radius:14px;
  overflow:hidden;
}
.player-top{
  position:relative;padding:22px 18px 16px;
  background:linear-gradient(180deg,rgba(169,221,211,0.06) 0%,transparent 100%);
  text-align:center;border-bottom:1px solid var(--border2);
}
.rank-aura{
  position:relative;display:inline-block;margin-bottom:10px;
}
.rank-aura::before{
  content:'';position:absolute;inset:-8px;border-radius:50%;
  background:radial-gradient(circle,var(--rank-glow,rgba(169,221,211,0.25)) 0%,transparent 70%);
  animation:aura 3s ease-in-out infinite;
}
@keyframes aura{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.6}}
.rank-icon{
  width:68px;height:68px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:2rem;position:relative;z-index:1;
  border:3px solid var(--rank-border,var(--mint));
  background:var(--card2);
}
.rank-name{font-family:var(--orb);font-size:0.78rem;font-weight:700;
  letter-spacing:2px;text-transform:uppercase;margin-top:8px}
.rank-name.rookie{color:var(--rank-rookie)}
.rank-name.staker{color:var(--rank-staker)}
.rank-name.warrior{color:var(--rank-warrior)}
.rank-name.diamond{color:var(--rank-diamond)}
.rank-name.legend{color:var(--rank-legend)}

.player-name{font-size:0.7rem;font-weight:700;color:var(--cream-dim);margin-top:2px;font-family:var(--mono)}

/* XP Bar */
.xp-section{padding:14px 16px;border-bottom:1px solid var(--border2)}
.xp-labels{display:flex;justify-content:space-between;margin-bottom:6px}
.xp-cur{font-size:0.7rem;font-family:var(--orb);font-weight:700;color:var(--mint)}
.xp-next{font-size:0.6rem;font-family:var(--mono);color:var(--cream-dim)}
.xp-bar-wrap{
  height:10px;background:rgba(169,221,211,0.08);
  border-radius:5px;overflow:hidden;border:1px solid rgba(169,221,211,0.1);
  position:relative;
}
.xp-bar-fill{
  height:100%;border-radius:5px;
  background:linear-gradient(90deg,var(--mint-deep),var(--mint),rgba(169,221,211,0.8));
  transition:width 1.2s cubic-bezier(.4,0,.2,1);position:relative;
}
.xp-bar-fill::after{
  content:'';position:absolute;right:0;top:0;bottom:0;width:20px;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,0.4));
  animation:shimmer 2s infinite;
}
@keyframes shimmer{0%{opacity:0}50%{opacity:1}100%{opacity:0}}
.xp-pct{font-size:0.58rem;font-family:var(--mono);color:var(--cream-dim);margin-top:4px;text-align:right}
.next-rank-hint{
  margin-top:8px;font-size:0.6rem;font-family:var(--mono);
  color:var(--cream-dim);text-align:center;
  padding:6px;background:rgba(169,221,211,0.04);border-radius:5px;
}
.next-rank-hint b{color:var(--mint)}

/* Player stats grid */
.player-stats{display:grid;grid-template-columns:1fr 1fr;gap:1px;background:var(--border2)}
.pstat{
  background:var(--card);padding:12px 14px;
}
.pstat .pl{font-size:0.55rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:var(--cream-dim);margin-bottom:4px}
.pstat .pv{font-size:0.88rem;font-family:var(--mono);font-weight:600;color:var(--cream)}

/* VIP status */
.vip-strip{
  padding:11px 16px;
  background:linear-gradient(90deg,rgba(240,192,64,0.08),rgba(240,192,64,0.03));
  border-top:1px solid rgba(240,192,64,0.15);
  display:flex;align-items:center;justify-content:space-between;
}
.vip-left{display:flex;align-items:center;gap:8px}
.vip-token-img{width:26px;height:26px;border-radius:50%;border:1px solid rgba(240,192,64,0.3);object-fit:cover}
.vip-text .vtop{font-size:0.65rem;font-weight:700;color:var(--gold)}
.vip-text .vbot{font-size:0.55rem;font-family:var(--mono);color:var(--cream-dim)}
.vip-badge{
  font-size:0.55rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;
  padding:3px 8px;border-radius:4px;
  background:rgba(240,192,64,0.12);border:1px solid rgba(240,192,64,0.25);
  color:var(--gold);
}

/* Streak */
.streak-row{
  padding:11px 16px;border-top:1px solid var(--border2);
  display:flex;align-items:center;justify-content:space-between;
}
.streak-dots{display:flex;gap:4px}
.sdot{
  width:20px;height:20px;border-radius:50%;border:1px solid var(--border);
  display:flex;align-items:center;justify-content:center;font-size:0.55rem;
  transition:.2s;
}
.sdot.lit{background:rgba(169,221,211,0.15);border-color:rgba(169,221,211,0.4);color:var(--mint)}
.sdot.today{background:var(--mint);border-color:var(--mint);color:var(--black);font-weight:700;
  box-shadow:0 0 10px rgba(169,221,211,0.5)}
.streak-info .si-val{font-size:0.72rem;font-weight:700;font-family:var(--mono);color:var(--mint)}
.streak-info .si-lab{font-size:0.55rem;color:var(--cream-dim);letter-spacing:1px;text-transform:uppercase}

/* â”€â”€ CENTER â€” STAKING POOLS â”€â”€ */
.col-stake-center{display:flex;flex-direction:column;gap:12px}

/* Pool cards */
.pool-card{
  background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;
  transition:.2s;
}
.pool-card:hover{border-color:rgba(169,221,211,0.22)}
.pool-top{
  display:flex;align-items:center;justify-content:space-between;
  padding:13px 16px;border-bottom:1px solid var(--border2);
}
.pool-name-row{display:flex;align-items:center;gap:9px}
.pool-name-row img{width:28px;height:28px;border-radius:50%;object-fit:cover}
.pool-title{font-size:0.85rem;font-weight:800;color:var(--cream)}
.pool-tag{
  font-size:0.53rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;
  padding:2px 7px;border-radius:4px;
}
.tag-vip{background:rgba(240,192,64,0.1);border:1px solid rgba(240,192,64,0.22);color:var(--gold)}
.tag-liquid{background:rgba(169,221,211,0.08);border:1px solid rgba(169,221,211,0.18);color:var(--mint)}
.tag-stable{background:rgba(96,165,250,0.08);border:1px solid rgba(96,165,250,0.18);color:var(--blue)}
.pool-apy-big{text-align:right}
.apy-val{font-family:var(--orb);font-size:1.1rem;font-weight:700;color:var(--green)}
.apy-sub{font-size:0.55rem;font-family:var(--mono);color:var(--cream-dim);margin-top:1px}

/* Pool stats */
.pool-stats-row{
  display:grid;grid-template-columns:repeat(4,1fr);
  padding:10px 16px;gap:6px;border-bottom:1px solid var(--border2);
}
.pool-stat .psl{font-size:0.54rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:var(--cream-dim);margin-bottom:3px}
.pool-stat .psv{font-size:0.75rem;font-family:var(--mono);font-weight:600;color:var(--cream)}

/* Lock picker */
.lock-section{padding:10px 16px;border-bottom:1px solid var(--border2)}
.lock-label{font-size:0.57rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--cream-dim);margin-bottom:7px}
.lock-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
.lock-opt{
  padding:9px 6px;border-radius:7px;border:1px solid var(--border);
  background:transparent;cursor:pointer;text-align:center;transition:.16s;font-family:var(--font);
}
.lock-opt:hover{border-color:rgba(169,221,211,0.25);background:rgba(169,221,211,0.04)}
.lock-opt.on{
  background:rgba(169,221,211,0.1);border-color:rgba(169,221,211,0.35);
}
.ld{display:block;font-size:0.75rem;font-weight:800;color:var(--cream);font-family:var(--mono)}
.la{display:block;font-size:0.55rem;color:var(--green);margin-top:2px}
.lx{display:block;font-size:0.55rem;color:var(--mint);margin-top:1px}

/* Stake input row */
.stake-input-row{
  display:flex;gap:8px;align-items:center;padding:12px 16px;
}
.s-input{
  flex:1;padding:10px 13px;background:rgba(169,221,211,0.04);
  border:1px solid var(--border);border-radius:8px;color:var(--cream);
  font-family:var(--mono);font-size:0.84rem;outline:none;transition:.18s;
}
.s-input:focus{border-color:rgba(169,221,211,0.3);background:rgba(169,221,211,0.07)}
.s-input::placeholder{color:var(--cream-faint)}
.stake-go{
  padding:10px 18px;border-radius:8px;border:none;cursor:pointer;
  background:linear-gradient(135deg,var(--mint),var(--mint-deep));
  color:var(--black);font-family:var(--font);font-size:0.68rem;
  font-weight:800;letter-spacing:1px;text-transform:uppercase;transition:.2s;
  white-space:nowrap;
}
.stake-go:hover{transform:translateY(-1px);box-shadow:0 4px 18px rgba(169,221,211,0.35)}
.stake-go.vip-only{
  background:linear-gradient(135deg,var(--gold),var(--gold2));color:var(--black);
}
.stake-go.vip-only:hover{box-shadow:0 4px 18px rgba(240,192,64,0.4)}

/* XP preview bar inside pool */
.xp-preview{
  padding:8px 16px 12px;display:flex;align-items:center;gap:10px;
}
.xp-prev-label{font-size:0.58rem;font-family:var(--mono);color:var(--cream-dim);white-space:nowrap}
.xp-mini-bar{flex:1;height:5px;background:rgba(169,221,211,0.08);border-radius:3px;overflow:hidden}
.xp-mini-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--mint-deep),var(--mint));transition:.8s}
.xp-prev-val{font-size:0.65rem;font-family:var(--orb);font-weight:700;color:var(--mint);white-space:nowrap}

/* My positions */
.positions-card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.pos-item{
  display:flex;align-items:center;justify-content:space-between;
  padding:11px 16px;border-bottom:1px solid var(--border2);transition:.14s;
}
.pos-item:last-child{border-bottom:none}
.pos-item:hover{background:rgba(169,221,211,0.03)}
.pos-l .pname{font-size:0.72rem;font-weight:700;color:var(--cream)}
.pos-l .psince{font-size:0.58rem;font-family:var(--mono);color:var(--cream-dim);margin-top:2px}
.pos-r{text-align:right}
.pos-r .pamt{font-size:0.76rem;font-weight:700;font-family:var(--mono);color:var(--cream)}
.pos-r .pearn{font-size:0.6rem;font-family:var(--mono);color:var(--green);margin-top:2px}
.pos-status{
  display:inline-block;font-size:0.5rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;
  padding:2px 6px;border-radius:3px;margin-left:6px;vertical-align:middle;
}
.ps-live{background:rgba(111,207,151,0.1);color:var(--green);border:1px solid rgba(111,207,151,0.2)}
.ps-lock{background:rgba(240,192,64,0.1);color:var(--gold);border:1px solid rgba(240,192,64,0.2)}

/* â”€â”€ RIGHT â€” ACHIEVEMENTS + LEADERBOARD â”€â”€ */
.col-stake-right{display:flex;flex-direction:column;gap:12px}

/* Rewards claim */
.rewards-hero{
  background:linear-gradient(135deg,rgba(169,221,211,0.09),rgba(169,221,211,0.02));
  border:1px solid rgba(169,221,211,0.2);border-radius:12px;padding:16px;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
}
.rh-left .rl{font-size:0.57rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--cream-dim)}
.rh-left .rv{font-size:1.15rem;font-weight:800;font-family:var(--orb);color:var(--mint);margin-top:3px}
.rh-left .rs{font-size:0.6rem;font-family:var(--mono);color:var(--green);margin-top:2px}
.claim-all{
  padding:11px 20px;border-radius:8px;border:none;cursor:pointer;
  background:linear-gradient(135deg,var(--mint),var(--mint-deep));
  color:var(--black);font-family:var(--font);font-size:0.68rem;
  font-weight:800;letter-spacing:1px;text-transform:uppercase;transition:.2s;
  white-space:nowrap;
}
.claim-all:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(169,221,211,0.4)}

/* Achievements */
.ach-card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.ach-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1px;background:var(--border2)}
.ach-item{
  background:var(--card);padding:10px 6px;text-align:center;cursor:pointer;
  transition:.16s;position:relative;
}
.ach-item:hover{background:var(--card2)}
.ach-item.locked{opacity:.38;filter:grayscale(1)}
.ach-item.unlocked{background:rgba(169,221,211,0.04)}
.ach-icon{font-size:1.4rem;margin-bottom:4px;display:block}
.ach-name{font-size:0.52rem;font-weight:700;letter-spacing:.5px;color:var(--cream-dim);line-height:1.2}
.ach-item.unlocked .ach-name{color:var(--mint)}
.ach-item.unlocked::after{
  content:'âœ“';position:absolute;top:4px;right:5px;
  font-size:0.5rem;color:var(--green);font-weight:700;
}

/* Leaderboard */
.lb-card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.lb-row{
  display:flex;align-items:center;gap:9px;padding:9px 14px;
  border-bottom:1px solid var(--border2);transition:.14s;
}
.lb-row:last-child{border-bottom:none}
.lb-row:hover{background:rgba(169,221,211,0.03)}
.lb-row.me{background:rgba(169,221,211,0.06);border-left:2px solid var(--mint)}
.lb-rank{
  font-family:var(--orb);font-size:0.7rem;font-weight:700;
  width:22px;text-align:center;flex-shrink:0;
}
.lb-rank.r1{color:var(--gold)}
.lb-rank.r2{color:#c0c0c0}
.lb-rank.r3{color:#cd7f32}
.lb-rank.rx{color:var(--cream-dim)}
.lb-avatar{
  width:26px;height:26px;border-radius:50%;
  background:var(--card3);border:1px solid var(--border);
  display:flex;align-items:center;justify-content:center;font-size:0.7rem;flex-shrink:0;
}
.lb-name{flex:1;font-size:0.68rem;font-weight:700;color:var(--cream)}
.lb-xp{font-size:0.62rem;font-family:var(--mono);color:var(--mint);font-weight:600}
.lb-badge{font-size:0.6rem}

/* â•â•â•â• WALLET MODAL â•â•â•â• */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:800;
  display:none;align-items:center;justify-content:center;backdrop-filter:blur(6px);
}
.modal-overlay.on{display:flex}
.modal-box{
  background:var(--card);border:1px solid var(--border);border-radius:14px;
  padding:26px;width:340px;max-width:94vw;
}
.modal-title{font-size:1rem;font-weight:800;letter-spacing:1px;margin-bottom:4px}
.modal-sub{font-size:0.68rem;color:var(--cream-dim);margin-bottom:18px}
.w-opt{
  display:flex;align-items:center;gap:12px;padding:12px 14px;
  border-radius:9px;border:1px solid var(--border);background:rgba(255,255,255,0.02);
  cursor:pointer;margin-bottom:8px;transition:.18s;
}
.w-opt:hover{background:rgba(169,221,211,0.06);border-color:rgba(169,221,211,0.25)}
.w-opt img{width:34px;height:34px;border-radius:8px;object-fit:cover}
.w-nm{font-size:0.78rem;font-weight:700;color:var(--cream)}
.w-ds{font-size:0.6rem;color:var(--cream-dim);margin-top:1px}
.modal-close{
  width:100%;padding:10px;border-radius:7px;border:1px solid var(--border);
  background:transparent;color:var(--cream-dim);font-family:var(--font);
  font-size:0.7rem;cursor:pointer;margin-top:4px;transition:.18s;
}
.modal-close:hover{border-color:rgba(169,221,211,0.3);color:var(--mint)}

/* â•â•â•â• TOAST â•â•â•â• */
.toast{
  position:fixed;bottom:20px;right:20px;z-index:700;
  background:var(--card2);border:1px solid rgba(169,221,211,0.28);
  border-radius:9px;padding:13px 18px;font-size:0.74rem;line-height:1.5;
  transform:translateY(80px);opacity:0;transition:.3s cubic-bezier(.4,0,.2,1);
  max-width:290px;box-shadow:0 8px 32px rgba(0,0,0,0.5);
}
.toast.on{transform:none;opacity:1}

/* XP floating popup */
.xp-popup{
  position:fixed;bottom:70px;right:20px;z-index:700;
  background:rgba(169,221,211,0.12);border:1px solid rgba(169,221,211,0.3);
  border-radius:8px;padding:8px 14px;font-family:var(--orb);font-size:0.8rem;
  font-weight:700;color:var(--mint);
  transform:translateY(20px);opacity:0;transition:.3s;
}
.xp-popup.on{transform:none;opacity:1}

/* â•â•â•â• FOOTER â•â•â•â• */
footer{
  position:relative;z-index:1;text-align:center;padding:18px;
  font-size:0.6rem;color:var(--cream-dim);border-top:1px solid var(--border2);
  letter-spacing:1.5px;margin-top:14px;
}
footer b{color:var(--mint)}

/* â•â•â•â• RESPONSIVE â•â•â•â• */
@media(max-width:1100px){
  .swap-grid{grid-template-columns:1fr 380px}
  .col-left{display:none}
  .stake-grid{grid-template-columns:280px 1fr 295px}
}
@media(max-width:820px){
  .swap-grid,.stake-grid{grid-template-columns:1fr}
  .stats-row,.pool-stats-row{grid-template-columns:repeat(2,1fr)}
  .lock-grid{grid-template-columns:repeat(4,1fr)}
  .col-stake-right{display:none}
}
</style>
</head>
<body>

<div class="ambient"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• WALLET MODAL â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="walletModal">
  <div class="modal-box">
    <div class="modal-title">Connect Wallet</div>
    <div class="modal-sub">Choose your Solana wallet to swap & stake</div>
    <div class="w-opt" onclick="doConnect('Phantom')">
      <img src="https://phantom.app/img/phantom-logo.png" onerror="this.style.background='#4e44ce'">
      <div><div class="w-nm">Phantom</div><div class="w-ds">Most popular Solana wallet</div></div>
    </div>
    <div class="w-opt" onclick="doConnect('Solflare')">
      <img src="https://solflare.com/favicon.ico" onerror="this.style.background='#fc7227'">
      <div><div class="w-nm">Solflare</div><div class="w-ds">Non-custodial Solana wallet</div></div>
    </div>
    <div class="w-opt" onclick="doConnect('Backpack')">
      <img src="https://backpack.app/favicon.ico" onerror="this.style.background='#e33d3d'">
      <div><div class="w-nm">Backpack</div><div class="w-ds">Multi-chain wallet</div></div>
    </div>
    <button class="modal-close" onclick="closeModal()">Cancel</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• TOAST & XP POPUP â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="toast" id="toast"></div>
<div class="xp-popup" id="xpPop"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• NAV â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav>
  <a class="logo" href="#">
    <img src="https://i.postimg.cc/4N7nc22q/1772002407683.png"
         onerror="this.style.display='none'" alt="Rialo">
    <span class="logo-text">RIALOSWAP</span>
  </a>

  <div class="nav-center">
    <button class="nav-btn on" onclick="switchPage('swap',this)">âš¡ Swap</button>
    <button class="nav-btn" onclick="switchPage('stake',this)">ğŸ† Stake &amp; Earn</button>
  </div>

  <div class="nav-right">
    <div class="net-pill"><div class="dot"></div>SOLANA</div>
    <button class="wallet-btn" id="walletBtn" onclick="openModal()">Connect Wallet</button>
  </div>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SWAP PAGE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page on" id="page-swap">
<div class="swap-grid">

  <!-- LEFT: Pairs -->
  <div class="card col-left" style="grid-row:1/4">
    <div class="chead">Market Pairs</div>
    <div id="pairList"></div>
  </div>

  <!-- CENTER -->
  <div class="col-center">

    <!-- Stats -->
    <div class="stats-row">
      <div class="stat-c"><div class="sl">SOL Price</div><div class="sv" id="sPrice">$--</div><div class="ss" id="sChg">--</div></div>
      <div class="stat-c"><div class="sl">24h Volume</div><div class="sv" id="sVol">$--</div><div class="ss">Solana DEX</div></div>
      <div class="stat-c"><div class="sl">Market Cap</div><div class="sv" id="sMkt">$--</div><div class="ss">SOL</div></div>
      <div class="stat-c"><div class="sl">Network TPS</div><div class="sv" id="sTps">--</div><div class="ss">tx/sec</div></div>
    </div>

    <!-- Chart -->
    <div class="card chart-card">
      <div class="chart-top">
        <div class="pair-icons">
          <img id="pLogo1" src="https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png" alt="SOL">
          <img id="pLogo2" src="https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png" alt="USDC">
        </div>
        <span class="pair-label" id="pairName">SOL / USDC</span>
        <div style="flex:1">
          <span class="live-p" id="liveP">$--</span>
          <span class="live-c" id="liveC">--</span>
        </div>
        <div class="tf-row">
          <button class="tf on" onclick="setTF(this,60)">1m</button>
          <button class="tf" onclick="setTF(this,300)">5m</button>
          <button class="tf" onclick="setTF(this,900)">15m</button>
          <button class="tf" onclick="setTF(this,3600)">1h</button>
          <button class="tf" onclick="setTF(this,14400)">4h</button>
          <button class="tf" onclick="setTF(this,86400)">1d</button>
        </div>
      </div>
      <div id="chartDiv"></div>
      <div class="chart-inds">
        <div class="ind"><span class="il">RSI(14)</span><span class="iv" id="iRsi">--</span></div>
        <div class="ind"><span class="il">MACD</span><span class="iv" id="iMacd">--</span></div>
        <div class="ind"><span class="il">Vol 24h</span><span class="iv up" id="iVol">--</span></div>
        <div class="ind"><span class="il">Mkt Cap</span><span class="iv" id="iMktI">--</span></div>
      </div>
    </div>

    <!-- Recent Trades -->
    <div class="card">
      <div class="chead">Recent Trades</div>
      <div class="tcols"><span>Type</span><span>Price (USDC)</span><span>Amount</span><span>Time</span></div>
      <div id="tradeList"></div>
    </div>

  </div>

  <!-- RIGHT -->
  <div class="col-right">
    <div class="rtabs">
      <button class="rtab on" id="rt-swap" onclick="switchRight('swap')">âš¡ Swap</button>
      <button class="rtab" id="rt-stk" onclick="switchRight('stake')">ğŸ”’ Quick Stake</button>
    </div>

    <div id="r-swap-panel">
      <div class="jup-wrap">
        <div class="jup-label">Advanced Swap Â· Jupiter Ultra</div>
        <div id="jup-container"></div>
      </div>
    </div>

    <div id="r-stake-panel" style="display:none">
      <div class="net-stats">
        <div class="ns-t">Your Staking Stats</div>
        <div class="ns-row"><span>Rank</span><span style="color:var(--mint)" id="qs-rank">Rookie ğŸŒ±</span></div>
        <div class="ns-row"><span>Total XP</span><span id="qs-xp">1,250 XP</span></div>
        <div class="ns-row"><span>Staked Value</span><span id="qs-val">$4,220</span></div>
        <div class="ns-row"><span>Current APY</span><span class="up" id="qs-apy">12.8%</span></div>
        <div class="ns-row"><span>Day Streak</span><span style="color:var(--gold)">ğŸ”¥ 5 days</span></div>
        <div class="ns-row"><span>Pending Rewards</span><span style="color:var(--green)">0.041 SOL</span></div>
        <div style="padding:12px 0 0">
          <button class="stake-go" style="width:100%" onclick="switchPage('stake',document.querySelectorAll('.nav-btn')[1])">
            Go to Stake &amp; Earn â†’
          </button>
        </div>
      </div>
    </div>

    <div class="net-stats" id="swap-net-stats">
      <div class="ns-t">Network</div>
      <div class="ns-row"><span>SOL Price</span><span class="up" id="ns-sol">$--</span></div>
      <div class="ns-row"><span>Aggregator</span><span style="color:var(--mint)">Jupiter Ultra</span></div>
      <div class="ns-row"><span>Liquidity</span><span>30+ DEXs</span></div>
      <div class="ns-row"><span>Token List</span><span>400,000+</span></div>
      <div class="ns-row"><span>TPS</span><span id="ns-tps">--</span></div>
    </div>
  </div>

</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     STAKING PAGE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="page-stake">
<div class="stake-page">

  <!-- Season Banner -->
  <div class="season-banner">
    <div class="sb-left">
      <div class="title">âš”ï¸ SEASON 1 â€” GENESIS</div>
      <div class="subtitle">Stake longer Â· Rank higher Â· Earn <b>more</b> Â· Win the prize pool</div>
    </div>
    <div class="sb-center">
      <div class="timer-label">Season Ends In</div>
      <div class="timer-boxes">
        <div class="tbox"><div class="num" id="td">--</div><div class="lbl">Days</div></div>
        <div class="tsep">:</div>
        <div class="tbox"><div class="num" id="th">--</div><div class="lbl">Hrs</div></div>
        <div class="tsep">:</div>
        <div class="tbox"><div class="num" id="tm">--</div><div class="lbl">Min</div></div>
        <div class="tsep">:</div>
        <div class="tbox"><div class="num" id="ts">--</div><div class="lbl">Sec</div></div>
      </div>
    </div>
    <div class="sb-right">
      <div class="prize-label">ğŸ† Season Prize Pool</div>
      <div class="prize-val">$50,000</div>
      <div class="prize-sub">Distributed to Top 100 stakers</div>
    </div>
  </div>

  <!-- Main Grid -->
  <div class="stake-grid">

    <!-- LEFT: Player Card -->
    <div class="player-card">

      <!-- Rank display -->
      <div class="player-top">
        <div class="rank-aura" id="rankAura">
          <div class="rank-icon" id="rankIcon">ğŸŒ±</div>
        </div>
        <div class="rank-name rookie" id="rankName">ROOKIE</div>
        <div class="player-name" id="playerAddr">Connect wallet to view stats</div>
      </div>

      <!-- XP Bar -->
      <div class="xp-section">
        <div class="xp-labels">
          <span class="xp-cur" id="xpCur">1,250 XP</span>
          <span class="xp-next" id="xpNext">/ 2,500 XP</span>
        </div>
        <div class="xp-bar-wrap">
          <div class="xp-bar-fill" id="xpFill" style="width:50%"></div>
        </div>
        <div class="xp-pct" id="xpPct">50% to next rank</div>
        <div class="next-rank-hint" id="nextRankHint">
          1,250 XP to <b>STAKER</b> â€” Keep staking!
        </div>
      </div>

      <!-- Stats 2x2 -->
      <div class="player-stats">
        <div class="pstat"><div class="pl">Total Staked</div><div class="pv" id="ps-staked">$4,220</div></div>
        <div class="pstat"><div class="pl">Season Rank</div><div class="pv" id="ps-srank">#42</div></div>
        <div class="pstat"><div class="pl">Rewards Earned</div><div class="pv" id="ps-rew">$184</div></div>
        <div class="pstat"><div class="pl">Active Pools</div><div class="pv" id="ps-pools">2</div></div>
      </div>

      <!-- VIP Token Status -->
      <div class="vip-strip">
        <div class="vip-left">
          <img class="vip-token-img"
               src="https://i.postimg.cc/bJwwwm2B/20260222-194517.jpg"
               alt="RLO Token"
               onerror="this.style.background='#a9ddd3'">
          <div class="vip-text">
            <div class="vtop">RLO Token Holder</div>
            <div class="vbot">2Ã— XP Â· Best APY Â· Reduced Penalty</div>
          </div>
        </div>
        <div class="vip-badge">VIP</div>
      </div>

      <!-- Day Streak -->
      <div class="streak-row">
        <div>
          <div class="streak-info">
            <div class="si-val">ğŸ”¥ 5 Day Streak</div>
            <div class="si-lab">+5% APY bonus at 7 days</div>
          </div>
        </div>
        <div class="streak-dots">
          <div class="sdot lit">1</div>
          <div class="sdot lit">2</div>
          <div class="sdot lit">3</div>
          <div class="sdot lit">4</div>
          <div class="sdot today">5</div>
          <div class="sdot">6</div>
          <div class="sdot">7</div>
        </div>
      </div>

    </div>

    <!-- CENTER: Staking Pools -->
    <div class="col-stake-center">

      <!-- POOL 1: SOL â€” Liquid -->
      <div class="pool-card">
        <div class="pool-top">
          <div class="pool-name-row">
            <img src="https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png" alt="SOL">
            <span class="pool-title">SOL</span>
            <span class="pool-tag tag-liquid">LIQUID</span>
          </div>
          <div class="pool-apy-big">
            <div class="apy-val" id="sol-apy-val">12.8% APY</div>
            <div class="apy-sub">Base Â· Flexible lock</div>
          </div>
        </div>
        <div class="pool-stats-row">
          <div class="pool-stat"><div class="psl">TVL</div><div class="psv">$14.2M</div></div>
          <div class="pool-stat"><div class="psl">Stakers</div><div class="psv">2,104</div></div>
          <div class="pool-stat"><div class="psl">Min Stake</div><div class="psv">0.1 SOL</div></div>
          <div class="pool-stat"><div class="psl">Epoch Reward</div><div class="psv">Daily</div></div>
        </div>
        <div class="lock-section">
          <div class="lock-label">Lock Duration Â· XP Bonus</div>
          <div class="lock-grid" id="sol-locks">
            <button class="lock-opt on" onclick="pickLock(this,'sol',30,0,'100')">
              <span class="ld">30d</span><span class="la">Base</span><span class="lx">+100 XP</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'sol',90,20,'350')">
              <span class="ld">90d</span><span class="la">+20% APY</span><span class="lx">+350 XP</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'sol',180,50,'800')">
              <span class="ld">180d</span><span class="la">+50% APY</span><span class="lx">+800 XP</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'sol',365,100,'2000')">
              <span class="ld">365d</span><span class="la">+100% APY</span><span class="lx">+2000 XP</span>
            </button>
          </div>
        </div>
        <div class="xp-preview">
          <span class="xp-prev-label" id="sol-xp-label">+100 XP on stake</span>
          <div class="xp-mini-bar"><div class="xp-mini-fill" id="sol-xp-bar" style="width:5%"></div></div>
          <span class="xp-prev-val" id="sol-xp-val">100 XP</span>
        </div>
        <div class="stake-input-row">
          <input class="s-input" id="sol-amt" type="number" placeholder="Amount (SOL)" min="0">
          <button class="stake-go" onclick="doStake('SOL','sol')">Stake SOL</button>
        </div>
      </div>

      <!-- POOL 2: RLO VIP â€” Only for token holders -->
      <div class="pool-card" style="border-color:rgba(240,192,64,0.2)">
        <div class="pool-top">
          <div class="pool-name-row">
            <img src="https://i.postimg.cc/bJwwwm2B/20260222-194517.jpg"
                 alt="RLO" onerror="this.style.background='#a9ddd3'">
            <span class="pool-title">RLO</span>
            <span class="pool-tag tag-vip">â­ VIP Only</span>
          </div>
          <div class="pool-apy-big">
            <div class="apy-val" style="color:var(--gold)" id="rlo-apy-val">28.0% APY</div>
            <div class="apy-sub">2Ã— XP Â· Reduced Penalty</div>
          </div>
        </div>
        <div class="pool-stats-row">
          <div class="pool-stat"><div class="psl">TVL</div><div class="psv">$6.8M</div></div>
          <div class="pool-stat"><div class="psl">Stakers</div><div class="psv">412</div></div>
          <div class="pool-stat"><div class="psl">XP Mult</div><div class="psv" style="color:var(--gold)">2Ã—</div></div>
          <div class="pool-stat"><div class="psl">Exit Penalty</div><div class="psv">5%</div></div>
        </div>
        <div class="lock-section">
          <div class="lock-label">Lock Duration Â· 2Ã— XP Applied</div>
          <div class="lock-grid" id="rlo-locks">
            <button class="lock-opt on" onclick="pickLock(this,'rlo',30,0,'200')">
              <span class="ld">30d</span><span class="la">Base</span><span class="lx" style="color:var(--gold)">+200 XP Ã—2</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'rlo',90,20,'700')">
              <span class="ld">90d</span><span class="la">+20% APY</span><span class="lx" style="color:var(--gold)">+700 XP Ã—2</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'rlo',180,50,'1600')">
              <span class="ld">180d</span><span class="la">+50% APY</span><span class="lx" style="color:var(--gold)">+1600 XP Ã—2</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'rlo',365,100,'4000')">
              <span class="ld">365d</span><span class="la">+100% APY</span><span class="lx" style="color:var(--gold)">+4000 XP Ã—2</span>
            </button>
          </div>
        </div>
        <div class="xp-preview">
          <span class="xp-prev-label" id="rlo-xp-label">+200 XP (2Ã— VIP) on stake</span>
          <div class="xp-mini-bar"><div class="xp-mini-fill" id="rlo-xp-bar" style="width:10%;background:linear-gradient(90deg,var(--gold2),var(--gold))"></div></div>
          <span class="xp-prev-val" style="color:var(--gold)" id="rlo-xp-val">200 XP</span>
        </div>
        <div class="stake-input-row">
          <input class="s-input" id="rlo-amt" type="number" placeholder="Amount (RLO)" min="0">
          <button class="stake-go vip-only" onclick="doStake('RLO','rlo')">â­ VIP Stake</button>
        </div>
      </div>

      <!-- POOL 3: USDC Stable -->
      <div class="pool-card">
        <div class="pool-top">
          <div class="pool-name-row">
            <img src="https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png" alt="USDC">
            <span class="pool-title">USDC</span>
            <span class="pool-tag tag-stable">STABLE</span>
          </div>
          <div class="pool-apy-big">
            <div class="apy-val" id="usdc-apy-val">8.6% APY</div>
            <div class="apy-sub">Stablecoin Â· 7d min lock</div>
          </div>
        </div>
        <div class="pool-stats-row">
          <div class="pool-stat"><div class="psl">TVL</div><div class="psv">$7.3M</div></div>
          <div class="pool-stat"><div class="psl">Stakers</div><div class="psv">1,209</div></div>
          <div class="pool-stat"><div class="psl">Min Stake</div><div class="psv">10 USDC</div></div>
          <div class="pool-stat"><div class="psl">Epoch Reward</div><div class="psv">Weekly</div></div>
        </div>
        <div class="lock-section">
          <div class="lock-label">Lock Duration Â· XP Bonus</div>
          <div class="lock-grid" id="usdc-locks">
            <button class="lock-opt on" onclick="pickLock(this,'usdc',30,0,'100')">
              <span class="ld">30d</span><span class="la">Base</span><span class="lx">+100 XP</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'usdc',90,20,'350')">
              <span class="ld">90d</span><span class="la">+20% APY</span><span class="lx">+350 XP</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'usdc',180,50,'800')">
              <span class="ld">180d</span><span class="la">+50% APY</span><span class="lx">+800 XP</span>
            </button>
            <button class="lock-opt" onclick="pickLock(this,'usdc',365,100,'2000')">
              <span class="ld">365d</span><span class="la">+100% APY</span><span class="lx">+2000 XP</span>
            </button>
          </div>
        </div>
        <div class="xp-preview">
          <span class="xp-prev-label" id="usdc-xp-label">+100 XP on stake</span>
          <div class="xp-mini-bar"><div class="xp-mini-fill" id="usdc-xp-bar" style="width:5%;background:linear-gradient(90deg,#3b5fc0,var(--blue))"></div></div>
          <span class="xp-prev-val" style="color:var(--blue)" id="usdc-xp-val">100 XP</span>
        </div>
        <div class="stake-input-row">
          <input class="s-input" id="usdc-amt" type="number" placeholder="Amount (USDC)" min="0">
          <button class="stake-go" onclick="doStake('USDC','usdc')">Stake USDC</button>
        </div>
      </div>

      <!-- My Positions -->
      <div class="positions-card">
        <div class="chead">My Positions</div>
        <div class="pos-item">
          <div class="pos-l">
            <div class="pname">SOL Â· Flexible <span class="pos-status ps-live">LIVE</span></div>
            <div class="psince">Staked 14 days ago Â· 12.8% APY Â· +100 XP earned</div>
          </div>
          <div class="pos-r">
            <div class="pamt">4.200 SOL</div>
            <div class="pearn">+0.041 SOL earned</div>
          </div>
        </div>
        <div class="pos-item">
          <div class="pos-l">
            <div class="pname">RLO Â· 180d Lock <span class="pos-status ps-lock">LOCKED</span></div>
            <div class="psince">Staked 8 days ago Â· 28% APY Â· 2Ã— XP active</div>
          </div>
          <div class="pos-r">
            <div class="pamt">1,500 RLO</div>
            <div class="pearn">+12.4 RLO earned</div>
          </div>
        </div>
      </div>

    </div>

    <!-- RIGHT: Achievements + Leaderboard -->
    <div class="col-stake-right">

      <!-- Claimable Rewards -->
      <div class="rewards-hero">
        <div class="rh-left">
          <div class="rl">Claimable Rewards</div>
          <div class="rv" id="rew-amt">0.041 SOL</div>
          <div class="rs">â‰ˆ $<span id="rew-usd">--</span> Â· Updates every epoch</div>
        </div>
        <button class="claim-all" onclick="doClaim()">Claim All</button>
      </div>

      <!-- Achievements -->
      <div class="ach-card">
        <div class="chead">Achievements (8/16 Unlocked)</div>
        <div class="ach-grid" id="achGrid"></div>
      </div>

      <!-- Leaderboard -->
      <div class="lb-card">
        <div class="chead">Season Leaderboard</div>
        <div id="leaderboard"></div>
      </div>

    </div>

  </div>
</div>
</div>

<footer>
  <div style="display:flex;align-items:center;justify-content:center;gap:32px;flex-wrap:wrap;padding-bottom:8px">
    <span>Powered by <b>Rialo Protocol</b> Â· Swap engine by <b>Jupiter Ultra</b> Â· Built on <b>Solana</b> Â· Season 1 Genesis</span>
    <div style="display:flex;align-items:center;gap:10px;padding:8px 16px;background:rgba(169,221,211,0.05);border:1px solid rgba(169,221,211,0.15);border-radius:40px;">
      <img src="https://i.postimg.cc/FzM26x5c/FYZAN.jpg"
           alt="BappyOnchain"
           onerror="this.style.display='none'"
           style="width:28px;height:28px;border-radius:50%;object-fit:cover;border:1.5px solid rgba(169,221,211,0.4);">
      <div style="text-align:left;line-height:1.3">
        <div style="font-size:0.58rem;letter-spacing:1.5px;text-transform:uppercase;color:rgba(232,227,213,0.4)">Designed & Developed by</div>
        <a href="https://x.com/BappyOnchain" target="_blank" rel="noopener"
           style="font-size:0.72rem;font-weight:800;color:var(--mint);text-decoration:none;letter-spacing:.5px;font-family:var(--mono)">@BappyOnchain</a>
      </div>
    </div>
  </div>
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• JS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â”€â”€ RANK SYSTEM â”€â”€
const RANKS = [
  { name:'ROOKIE',  icon:'ğŸŒ±', xpMin:0,    xpMax:2500,  color:'#94a3b8', glow:'rgba(148,163,184,0.25)',  border:'#94a3b8' },
  { name:'STAKER',  icon:'âš¡', xpMin:2500, xpMax:7500,  color:'#a9ddd3', glow:'rgba(169,221,211,0.3)',   border:'#a9ddd3' },
  { name:'WARRIOR', icon:'âš”ï¸', xpMin:7500, xpMax:18000, color:'#60a5fa', glow:'rgba(96,165,250,0.35)',   border:'#60a5fa' },
  { name:'DIAMOND', icon:'ğŸ’', xpMin:18000,xpMax:40000, color:'#c084fc', glow:'rgba(192,132,252,0.35)',  border:'#c084fc' },
  { name:'LEGEND',  icon:'ğŸ‘‘', xpMin:40000,xpMax:99999, color:'#f0c040', glow:'rgba(240,192,64,0.4)',    border:'#f0c040' },
];

// â”€â”€ STATE â”€â”€
let playerXP = 1250;
let connected = false;
let currentPrice = 0;
let lockChoices = { sol:'100', rlo:'200', usdc:'100' };
let chart, cs, candles = [];

// â”€â”€ PAGE ROUTING â”€â”€
function switchPage(id, btn) {
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('on'));
  document.getElementById('page-'+id).classList.add('on');
}

function switchRight(panel) {
  const isSwap = panel==='swap';
  document.getElementById('rt-swap').classList.toggle('on',isSwap);
  document.getElementById('rt-stk').classList.toggle('on',!isSwap);
  document.getElementById('r-swap-panel').style.display = isSwap?'block':'none';
  document.getElementById('r-stake-panel').style.display = isSwap?'none':'block';
}

// â”€â”€ WALLET â”€â”€
function openModal(){ document.getElementById('walletModal').classList.add('on') }
function closeModal(){ document.getElementById('walletModal').classList.remove('on') }
async function doConnect(name) {
  closeModal();
  if(name==='Phantom' && window.solana?.isPhantom){
    try{
      const r = await window.solana.connect();
      const addr = r.publicKey.toString();
      setConnected(addr.slice(0,4)+'...'+addr.slice(-4));
      return;
    }catch(e){ toast('âš ï¸ Connection rejected'); return; }
  }
  setConnected(name.slice(0,3)+'7x...k9P');
}
function setConnected(label){
  connected = true;
  const b = document.getElementById('walletBtn');
  b.textContent = 'â— '+label; b.classList.add('on');
  document.getElementById('playerAddr').textContent = label;
  toast('âœ… Wallet connected! You have 1,500 RLO â€” VIP access unlocked');
}

// â”€â”€ RANK ENGINE â”€â”€
function getRank(xp){
  for(let i=RANKS.length-1;i>=0;i--){ if(xp >= RANKS[i].xpMin) return RANKS[i]; }
  return RANKS[0];
}
function updateRankUI(xp){
  const rank = getRank(xp);
  const next = RANKS[RANKS.indexOf(rank)+1];
  const el_icon = document.getElementById('rankIcon');
  const el_name = document.getElementById('rankName');
  const el_aura = document.getElementById('rankAura');
  const el_cur  = document.getElementById('xpCur');
  const el_next = document.getElementById('xpNext');
  const el_fill = document.getElementById('xpFill');
  const el_pct  = document.getElementById('xpPct');
  const el_hint = document.getElementById('nextRankHint');

  el_icon.textContent = rank.icon;
  el_icon.style.borderColor = rank.border;
  el_name.textContent = rank.name;
  el_name.className = 'rank-name '+rank.name.toLowerCase();
  el_aura.style.setProperty('--rank-glow', rank.glow);
  el_cur.textContent = xp.toLocaleString()+' XP';
  el_cur.style.color = rank.color;

  if(next){
    const pct = Math.min(100,((xp-rank.xpMin)/(rank.xpMax-rank.xpMin))*100);
    el_next.textContent = '/ '+rank.xpMax.toLocaleString()+' XP';
    el_fill.style.width = pct+'%';
    el_pct.textContent = pct.toFixed(0)+'% to next rank';
    el_hint.innerHTML = (rank.xpMax-xp).toLocaleString()+' XP to <b style="color:'+RANKS[RANKS.indexOf(rank)+1].color+'">'+next.name+'</b> â€” Keep staking!';
  } else {
    el_next.textContent = '/ MAX';
    el_fill.style.width = '100%';
    el_pct.textContent = 'ğŸ† Maximum Rank Achieved!';
    el_hint.innerHTML = 'ğŸ‘‘ You are a <b style="color:var(--gold)">LEGEND</b>. You\'ve reached the top!';
  }
}

function addXP(amount, label){
  const before = getRank(playerXP);
  playerXP += amount;
  const after = getRank(playerXP);
  updateRankUI(playerXP);
  showXPPop('+'+amount+' XP');
  if(before.name !== after.name){
    setTimeout(()=>toast('ğŸ‰ RANK UP! You are now '+after.icon+' '+after.name+'!'),600);
  }
  // Update display
  document.getElementById('xpCur').textContent = playerXP.toLocaleString()+' XP';
}

function showXPPop(msg){
  const el = document.getElementById('xpPop');
  el.textContent = msg; el.classList.add('on');
  setTimeout(()=>el.classList.remove('on'),2200);
}

// â”€â”€ LOCK PICKER â”€â”€
function pickLock(btn, pool, days, apyBonus, xpAmt){
  btn.closest('.lock-grid').querySelectorAll('.lock-opt').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  lockChoices[pool] = xpAmt;

  const xpNum = parseInt(xpAmt);
  const pct = Math.min(100,(xpNum/4000)*100);

  if(pool==='sol'){
    document.getElementById('sol-xp-label').textContent = '+'+xpAmt+' XP on stake';
    document.getElementById('sol-xp-bar').style.width = pct+'%';
    document.getElementById('sol-xp-val').textContent = xpAmt+' XP';
    const base = 12.8, final = (base*(1+apyBonus/100)).toFixed(1);
    document.getElementById('sol-apy-val').textContent = final+'% APY';
  } else if(pool==='rlo'){
    const xpX2 = xpNum;
    document.getElementById('rlo-xp-label').textContent = '+'+xpX2+' XP (2Ã— VIP) on stake';
    document.getElementById('rlo-xp-bar').style.width = Math.min(100,(xpX2/4000)*100)+'%';
    document.getElementById('rlo-xp-val').textContent = xpX2+' XP';
    const base = 14, final = (base*(1+apyBonus/100)*2).toFixed(1);
    document.getElementById('rlo-apy-val').textContent = final+'% APY';
  } else if(pool==='usdc'){
    document.getElementById('usdc-xp-label').textContent = '+'+xpAmt+' XP on stake';
    document.getElementById('usdc-xp-bar').style.width = pct+'%';
    document.getElementById('usdc-xp-val').textContent = xpAmt+' XP';
    const base = 8.6, final = (base*(1+apyBonus/100)).toFixed(1);
    document.getElementById('usdc-apy-val').textContent = final+'% APY';
  }
}

// â”€â”€ STAKING â”€â”€
function doStake(token, pool){
  if(!connected){ openModal(); return; }
  const amt = parseFloat(document.getElementById(pool+'-amt')?.value);
  if(!amt||amt<=0){ toast('âš ï¸ Enter an amount to stake'); return; }
  const xpAmt = parseInt(lockChoices[pool]||'100');
  toast('â³ Staking '+amt+' '+token+' on Rialo...');
  setTimeout(()=>{
    toast('âœ… '+amt+' '+token+' staked! Earning rewards + XP.');
    addXP(xpAmt, token+' Stake');
    checkAchievements('stake');
    document.getElementById(pool+'-amt').value='';
  },2000);
}

function doUnstake(token){
  toast('â³ Unstaking '+token+'... (~2 epoch wait)');
  setTimeout(()=>toast('âœ… Unstake initiated!'), 1800);
}

function doClaim(){
  if(!currentPrice){ toast('âš ï¸ Loading prices...'); return; }
  const usd = (0.041*currentPrice).toFixed(2);
  toast('â³ Claiming rewards...');
  setTimeout(()=>{
    toast('âœ… 0.041 SOL ($'+usd+') claimed to wallet!');
    addXP(50,'Claim Reward');
  },2000);
}

// â”€â”€ ACHIEVEMENTS â”€â”€
const ACHIEVEMENTS = [
  { id:'first_stake',  icon:'ğŸ¯', name:'First Stake',     desc:'Stake for the first time',        unlocked:true  },
  { id:'streak7',      icon:'ğŸ”¥', name:'7-Day Streak',    desc:'Login 7 days in a row',           unlocked:false },
  { id:'whale',        icon:'ğŸ‹', name:'Whale Entry',     desc:'Stake over $10,000',              unlocked:false },
  { id:'diamond_hand', icon:'ğŸ’', name:'Diamond Hands',   desc:'Lock for 365 days',               unlocked:false },
  { id:'vip_stake',    icon:'â­', name:'VIP Staker',      desc:'Stake RLO native token',          unlocked:true  },
  { id:'rank_staker',  icon:'âš¡', name:'Rank: Staker',    desc:'Reach Staker rank',               unlocked:false },
  { id:'rank_warrior', icon:'âš”ï¸', name:'Rank: Warrior',   desc:'Reach Warrior rank',              unlocked:false },
  { id:'rank_diamond', icon:'ğŸ’', name:'Rank: Diamond',   desc:'Reach Diamond rank',              unlocked:false },
  { id:'rank_legend',  icon:'ğŸ‘‘', name:'Rank: Legend',    desc:'Reach Legend rank',               unlocked:false },
  { id:'multi_pool',   icon:'ğŸŒŠ', name:'Pool Diver',      desc:'Stake in 2+ pools',               unlocked:true  },
  { id:'xp1000',       icon:'ğŸ“ˆ', name:'XP Grinder',      desc:'Earn 1,000 total XP',             unlocked:true  },
  { id:'xp5000',       icon:'ğŸš€', name:'XP Legend',       desc:'Earn 5,000 total XP',             unlocked:false },
  { id:'claimed',      icon:'ğŸ’°', name:'First Claim',     desc:'Claim rewards once',              unlocked:true  },
  { id:'top10',        icon:'ğŸ…', name:'Top 10',          desc:'Reach top 10 on leaderboard',     unlocked:false },
  { id:'season1',      icon:'ğŸ†', name:'Genesis Staker',  desc:'Participate in Season 1',         unlocked:true  },
  { id:'og',           icon:'ğŸŒŸ', name:'OG Member',       desc:'Stake in first week',             unlocked:true  },
];

function renderAchievements(){
  const grid = document.getElementById('achGrid');
  grid.innerHTML = ACHIEVEMENTS.map(a=>`
    <div class="ach-item ${a.unlocked?'unlocked':'locked'}" title="${a.desc}">
      <span class="ach-icon">${a.icon}</span>
      <div class="ach-name">${a.name}</div>
    </div>`).join('');
}

function checkAchievements(trigger){
  if(trigger==='stake'){
    const a = ACHIEVEMENTS.find(x=>x.id==='first_stake');
    if(a&&!a.unlocked){ a.unlocked=true; renderAchievements(); toast('ğŸ¯ Achievement Unlocked: First Stake!'); }
    if(playerXP>=1000){ const b=ACHIEVEMENTS.find(x=>x.id==='xp1000'); if(b&&!b.unlocked){b.unlocked=true;renderAchievements();toast('ğŸ“ˆ Achievement: XP Grinder!');} }
  }
}

// â”€â”€ LEADERBOARD â”€â”€
const LB_DATA = [
  { rank:1,  name:'CryptoWhale.sol', xp:'42,800', badge:'ğŸ‘‘', me:false },
  { rank:2,  name:'DiamondHands',    xp:'38,200', badge:'ğŸ’', me:false },
  { rank:3,  name:'SolMaxi99',       xp:'31,500', badge:'âš”ï¸', me:false },
  { rank:4,  name:'RialoOG',         xp:'28,100', badge:'âš¡', me:false },
  { rank:5,  name:'StakeMaster',     xp:'24,900', badge:'âš¡', me:false },
  { rank:6,  name:'LegendaryLP',     xp:'21,400', badge:'âš¡', me:false },
  { rank:42, name:'YOU',             xp:'1,250',  badge:'ğŸŒ±', me:true  },
];

function renderLeaderboard(){
  const lb = document.getElementById('leaderboard');
  lb.innerHTML = LB_DATA.map(r=>`
    <div class="lb-row ${r.me?'me':''}">
      <div class="lb-rank ${r.rank<=3?'r'+r.rank:'rx'}">${r.rank}</div>
      <div class="lb-avatar">${r.badge}</div>
      <div class="lb-name">${r.name}${r.me?' (You)':''}</div>
      <div class="lb-xp">${r.xp} XP</div>
    </div>`).join('');
}

// â”€â”€ SEASON COUNTDOWN â”€â”€
function updateTimer(){
  const end = new Date();
  end.setDate(end.getDate()+27);
  end.setHours(0,0,0,0);
  const diff = end - Date.now();
  if(diff<=0){document.getElementById('td').textContent='00';return}
  const d = Math.floor(diff/864e5);
  const h = Math.floor((diff%864e5)/36e5);
  const m = Math.floor((diff%36e5)/6e4);
  const s = Math.floor((diff%6e4)/1e3);
  document.getElementById('td').textContent = String(d).padStart(2,'0');
  document.getElementById('th').textContent = String(h).padStart(2,'0');
  document.getElementById('tm').textContent = String(m).padStart(2,'0');
  document.getElementById('ts').textContent = String(s).padStart(2,'0');
}
setInterval(updateTimer,1000);
updateTimer();

// â”€â”€ JUPITER PLUGIN â”€â”€
function initJupiter(){
  if(!window.Jupiter){setTimeout(initJupiter,250);return}
  window.Jupiter.init({
    displayMode:'integrated',
    integratedTargetId:'jup-container',
    defaultExplorer:'Solscan',
    formProps:{
      initialInputMint:'So11111111111111111111111111111111111111112',
      initialOutputMint:'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v',
    },
    onSuccess:({txid})=>{ toast('âœ… Swap confirmed! TX: '+txid.slice(0,8)+'...'); addXP(25,'Swap Bonus'); },
    onSwapError:({error})=>toast('âš ï¸ '+(error?.message||'Swap failed')),
  });
}
if(document.readyState==='complete')initJupiter();
else window.addEventListener('load',initJupiter);

// â”€â”€ CHART â”€â”€
function initChart(base){
  const el=document.getElementById('chartDiv');
  if(chart)chart.remove();
  chart=LightweightCharts.createChart(el,{
    width:el.clientWidth,height:278,
    layout:{background:{color:'#0a1612'},textColor:'#e8e3d5'},
    grid:{vertLines:{color:'rgba(169,221,211,0.045)'},horzLines:{color:'rgba(169,221,211,0.045)'}},
    crosshair:{mode:LightweightCharts.CrosshairMode.Normal},
    rightPriceScale:{borderColor:'rgba(169,221,211,0.15)'},
    timeScale:{borderColor:'rgba(169,221,211,0.15)',timeVisible:true,secondsVisible:false},
    handleScroll:true,handleScale:true,
  });
  cs=chart.addCandlestickSeries({
    upColor:'#a9ddd3',downColor:'#e05c6e',
    borderUpColor:'#a9ddd3',borderDownColor:'#e05c6e',
    wickUpColor:'#a9ddd3',wickDownColor:'#e05c6e',
  });
  candles=genCandles(base,120,60);
  cs.setData(candles);chart.timeScale().fitContent();
  window.addEventListener('resize',()=>chart?.applyOptions({width:el.clientWidth}));
}
function genCandles(base,count,iv){
  const arr=[];let p=base;
  const now=Math.floor(Date.now()/1000);
  for(let i=count;i>=0;i--){
    const o=p,c=o+(Math.random()-.48)*(iv<3600?base*.008:base*.02);
    arr.push({time:now-i*iv,open:o,close:c,
      high:Math.max(o,c)+Math.random()*base*.003,
      low:Math.min(o,c)-Math.random()*base*.003});
    p=c;
  }
  return arr;
}
function setTF(btn,iv){
  document.querySelectorAll('.tf').forEach(b=>b.classList.remove('on'));btn.classList.add('on');
  if(!chart||!currentPrice)return;
  candles=genCandles(currentPrice,120,iv);cs.setData(candles);chart.timeScale().fitContent();
}
setInterval(()=>{
  if(!cs||!candles.length)return;
  const last=candles[candles.length-1];
  const nc=last.close+(Math.random()-.48)*(currentPrice||150)*.002;
  const up={time:last.time,open:last.open,high:Math.max(last.high,nc),low:Math.min(last.low,nc),close:nc};
  candles[candles.length-1]=up;cs.update(up);
},1500);
setInterval(()=>{
  if(!cs||!candles.length)return;
  const last=candles[candles.length-1];
  const o=last.close,c=o+(Math.random()-.48)*(currentPrice||150)*.008;
  const nc={time:last.time+60,open:o,close:c,high:Math.max(o,c)+Math.random()*.5,low:Math.min(o,c)-Math.random()*.5};
  candles.push(nc);cs.update(nc);
},60000);

// â”€â”€ LIVE PRICES â”€â”€
const PAIRS=[
  {id:'solana',               sym:'SOL',  pair:'SOL/USDC'},
  {id:'bitcoin',              sym:'BTC',  pair:'BTC/USDC'},
  {id:'ethereum',             sym:'ETH',  pair:'ETH/USDC'},
  {id:'dogwifhat',            sym:'WIF',  pair:'WIF/USDC'},
  {id:'bonk',                 sym:'BONK', pair:'BONK/USDC'},
  {id:'jito-governance-token',sym:'JTO',  pair:'JTO/USDC'},
  {id:'raydium',              sym:'RAY',  pair:'RAY/USDC'},
];
async function fetchPrices(){
  try{
    const ids=PAIRS.map(p=>p.id).join(',');
    const r=await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${ids}&order=market_cap_desc&per_page=20&page=1&sparkline=false&price_change_percentage=24h`);
    const data=await r.json();
    const pEl=document.getElementById('pairList');pEl.innerHTML='';
    data.forEach((coin,i)=>{
      const pair=PAIRS.find(p=>p.id===coin.id);if(!pair)return;
      const p=coin.current_price,ch=coin.price_change_percentage_24h||0,pos=ch>=0;
      const fmt=p>1000?'$'+(p/1000).toFixed(2)+'k':p>1?'$'+p.toFixed(2):'$'+p.toFixed(6);
      if(coin.id==='solana'){
        currentPrice=p;
        document.getElementById('sPrice').textContent='$'+p.toFixed(2);
        document.getElementById('sChg').textContent=(pos?'+':'')+ch.toFixed(2)+'%';
        document.getElementById('sChg').style.color=pos?'var(--green)':'var(--red)';
        document.getElementById('liveP').textContent='$'+p.toFixed(2);
        document.getElementById('liveC').textContent=(pos?'+':'')+ch.toFixed(2)+'%';
        document.getElementById('liveC').style.color=pos?'var(--green)':'var(--red)';
        document.getElementById('sMkt').textContent='$'+(coin.market_cap/1e9).toFixed(1)+'B';
        document.getElementById('iMktI').textContent='$'+(coin.market_cap/1e9).toFixed(1)+'B';
        document.getElementById('iVol').textContent='$'+(coin.total_volume/1e9).toFixed(2)+'B';
        document.getElementById('iRsi').textContent=(40+Math.random()*20).toFixed(1);
        const mv=(Math.random()-.5).toFixed(2);
        document.getElementById('iMacd').textContent=mv;
        document.getElementById('iMacd').style.color=mv>0?'var(--green)':'var(--red)';
        document.getElementById('ns-sol').textContent='$'+p.toFixed(2);
        document.getElementById('rew-usd').textContent=(0.041*p).toFixed(2);
        if(!chart)initChart(p);
      }
      pEl.innerHTML+=`
        <div class="pair-item ${i===0?'on':''}" onclick="selPair(this,'${pair.pair}','${coin.image}')">
          <img src="${coin.image}" alt="${pair.sym}" onerror="this.src='https://assets.coingecko.com/coins/images/1/small/bitcoin.png'">
          <div class="pii">
            <div class="sym">${pair.pair}</div>
            <div class="price ${pos?'up':'dn'}">${fmt}</div>
            <div class="chg ${pos?'up':'dn'}">${pos?'+':''}${ch.toFixed(2)}%</div>
          </div>
        </div>`;
    });
    document.getElementById('sVol').textContent='$'+(1.2+Math.random()*.6).toFixed(1)+'B';
    const tps=2800+Math.floor(Math.random()*400);
    document.getElementById('sTps').textContent=tps.toLocaleString();
    document.getElementById('ns-tps').textContent=tps.toLocaleString()+' tx/s';
  }catch(e){console.warn('Price:',e)}
}
function selPair(el,pair,img){
  document.querySelectorAll('.pair-item').forEach(r=>r.classList.remove('on'));
  el.classList.add('on');
  document.getElementById('pairName').textContent=pair;
  document.getElementById('pLogo1').src=img;
}
fetchPrices();setInterval(fetchPrices,20000);

// â”€â”€ TRADE FEED â”€â”€
function addTrade(){
  const buy=Math.random()>.5;
  const p=currentPrice?(currentPrice+(Math.random()-.5)*.5).toFixed(4):'150.00';
  const a=(0.1+Math.random()*5).toFixed(2);
  const now=new Date();
  const t=[now.getHours(),now.getMinutes(),now.getSeconds()].map(n=>n.toString().padStart(2,'0')).join(':');
  const list=document.getElementById('tradeList');
  const row=document.createElement('div');row.className='trow';
  row.innerHTML=`<span class="${buy?'up':'dn'}">${buy?'BUY':'SELL'}</span><span class="${buy?'up':'dn'}">${p}</span><span>${a} SOL</span><span style="color:var(--cream-dim)">${t}</span>`;
  list.insertBefore(row,list.firstChild);
  if(list.children.length>15)list.removeChild(list.lastChild);
}
for(let i=0;i<12;i++)addTrade();
setInterval(addTrade,1800);

// â”€â”€ TOAST â”€â”€
function toast(msg){
  const el=document.getElementById('toast');
  el.textContent=msg;el.classList.add('on');
  setTimeout(()=>el.classList.remove('on'),4200);
}

// â”€â”€ INIT â”€â”€
renderAchievements();
renderLeaderboard();
updateRankUI(playerXP);
</script>
</body>
</html>
